<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='max-width-4 mx-auto'>
    <div class='clearfix md-mxn2'>
      <div class='fixed xs-hide fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'></h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#init'
                  class="">
                  init
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#start'
                  class="">
                  start
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#mdk'
                  class=" toggle-sibling">
                  MDK
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  <ul class='list-reset py1-ul pl1'>
                    <li class='h5'><span>Static members</span></li>
                    
                      <li><a
                        href='#MDK.CONTEXT_HEADER'
                        class='regular pre-open'>
                        .CONTEXT_HEADER
                      </a></li>
                    
                    </ul>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#MDK#start'
                        class='regular pre-open'>
                        #start
                      </a></li>
                      
                      <li><a
                        href='#MDK#stop'
                        class='regular pre-open'>
                        #stop
                      </a></li>
                      
                      <li><a
                        href='#MDK#register'
                        class='regular pre-open'>
                        #register
                      </a></li>
                      
                      <li><a
                        href='#MDK#setDefaultDeadline'
                        class='regular pre-open'>
                        #setDefaultDeadline
                      </a></li>
                      
                      <li><a
                        href='#MDK#setDefaultTimeout'
                        class='regular pre-open'>
                        #setDefaultTimeout
                      </a></li>
                      
                      <li><a
                        href='#MDK#session'
                        class='regular pre-open'>
                        #session
                      </a></li>
                      
                      <li><a
                        href='#MDK#join'
                        class='regular pre-open'>
                        #join
                      </a></li>
                      
                      <li><a
                        href='#MDK#derive'
                        class='regular pre-open'>
                        #derive
                      </a></li>
                      
                    </ul>
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#session'
                  class=" toggle-sibling">
                  Session
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#Session#inject'
                        class='regular pre-open'>
                        #inject
                      </a></li>
                      
                      <li><a
                        href='#Session#externalize'
                        class='regular pre-open'>
                        #externalize
                      </a></li>
                      
                      <li><a
                        href='#Session#critical'
                        class='regular pre-open'>
                        #critical
                      </a></li>
                      
                      <li><a
                        href='#Session#error'
                        class='regular pre-open'>
                        #error
                      </a></li>
                      
                      <li><a
                        href='#Session#warn'
                        class='regular pre-open'>
                        #warn
                      </a></li>
                      
                      <li><a
                        href='#Session#info'
                        class='regular pre-open'>
                        #info
                      </a></li>
                      
                      <li><a
                        href='#Session#debug'
                        class='regular pre-open'>
                        #debug
                      </a></li>
                      
                      <li><a
                        href='#Session#trace'
                        class='regular pre-open'>
                        #trace
                      </a></li>
                      
                      <li><a
                        href='#Session#route'
                        class='regular pre-open'>
                        #route
                      </a></li>
                      
                      <li><a
                        href='#Session#resolve'
                        class='regular pre-open'>
                        #resolve
                      </a></li>
                      
                      <li><a
                        href='#Session#resolve_until'
                        class='regular pre-open'>
                        #resolve_until
                      </a></li>
                      
                      <li><a
                        href='#Session#resolve_async'
                        class='regular pre-open'>
                        #resolve_async
                      </a></li>
                      
                      <li><a
                        href='#Session#start_interaction'
                        class='regular pre-open'>
                        #start_interaction
                      </a></li>
                      
                      <li><a
                        href='#Session#fail_interaction'
                        class='regular pre-open'>
                        #fail_interaction
                      </a></li>
                      
                      <li><a
                        href='#Session#finish_interaction'
                        class='regular pre-open'>
                        #finish_interaction
                      </a></li>
                      
                      <li><a
                        href='#Session#interact'
                        class='regular pre-open'>
                        #interact
                      </a></li>
                      
                      <li><a
                        href='#Session#setDeadline'
                        class='regular pre-open'>
                        #setDeadline
                      </a></li>
                      
                      <li><a
                        href='#Session#setTimeout'
                        class='regular pre-open'>
                        #setTimeout
                      </a></li>
                      
                      <li><a
                        href='#Session#getRemainingTime'
                        class='regular pre-open'>
                        #getRemainingTime
                      </a></li>
                      
                    </ul>
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#getdiscoveryfactory'
                  class="">
                  getDiscoveryFactory
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#getfailurepolicy'
                  class="">
                  getFailurePolicy
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#getwsclient'
                  class="">
                  getWSClient
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#context_header'
                  class="">
                  CONTEXT_HEADER
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='init'>
      init
    </h3>
    
  </div>
  

  <p>Create an unstarted instance of the MDK.</p>


  <div class='pre p1 fill-light mt0'>init()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='start'>
      start
    </h3>
    
  </div>
  

  <p>Create a started instance of the MDK. This is equivalent to
calling init() followed by start() on the resulting instance.</p>


  <div class='pre p1 fill-light mt0'>start()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='mdk'>
      MDK
    </h3>
    
  </div>
  

  <p>The MDK API consists of two interfaces: MDK and Session. The
MDK interface holds globally scoped APIs and state associated
with the microservice. The Session interface holds locally
scoped APIs and state. A Session must be used sequentially.</p>
<p>The MDK instance is responsible for communicating with
foundational services like discovery and tracing.</p>
<p>There will typically be one MDK instance for the entire
process, and one instance of the Session object per
thread/channel/request depending on how the MDK is integrated
and used within the application framework of choice.</p>


  <div class='pre p1 fill-light mt0'>new MDK()</div>

  

  
  
  
  
  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Static Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='MDK.CONTEXT_HEADER'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>CONTEXT_HEADER</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>This header is used to propogate shared context for distributed traces.</p>


  <div class='pre p1 fill-light mt0'>CONTEXT_HEADER</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='MDK#start'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>start()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Start the MDK. An MDK instance will not communicate with
foundational services unless it is started.</p>


  <div class='pre p1 fill-light mt0'>start()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#stop'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>stop()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Stop the MDK. When the MDK stops unregisters any service
endpoints from the discovery system. This should always
be done prior to process exit in order to propogate node
shutdowns in realtime rather than waiting for heartbeats
to detect node departures.</p>


  <div class='pre p1 fill-light mt0'>stop()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#register'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>register(service, version, address)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Registers a service endpoint with the discovery
system. This can be called at any point, however
registered endpoints will not be advertised to the
discovery system until the MDK is started.</p>


  <div class='pre p1 fill-light mt0'>register(service: any, version: any, address: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>service</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>address</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#setDefaultDeadline'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setDefaultDeadline(seconds)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Set the default timeout for MDK sessions.</p>
<p>This is the maximum timeout; if a joined session has a lower
timeout that will be used.</p>


  <div class='pre p1 fill-light mt0'>setDefaultDeadline(seconds: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>seconds</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#setDefaultTimeout'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setDefaultTimeout(seconds)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>DEPRECATED, use setDefaultDeadline().</p>


  <div class='pre p1 fill-light mt0'>setDefaultTimeout(seconds: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>seconds</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#session'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>session()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Creates a new Session. A Session created in this way will
result in a new distributed trace. This should therefore
be used primarily by edge services. Intermediary and
foundational services should make use of
join(encodedContext) in order to preserve distributed
traces.</p>


  <div class='pre p1 fill-light mt0'>session()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#join'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>join(encodedContext)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Create a new Session and join it to an existing distributed sesion.</p>
<p>This should only ever be done once per an encoded context. That
means you should only use it for RPC or similar one-off calls. If
you received the encoded context via a broadcast medium (pub/sub,
message queues with multiple readers, etc.) you should use
childSession() instead.</p>


  <div class='pre p1 fill-light mt0'>join(encodedContext: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>encodedContext</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='MDK#derive'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>derive(encodedContext)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Create a new Session. The given encoded distributed session&#x27;s
properties will be used to configure the new Session,
e.g. overrides will be preserved. However, because this is a new
Session the timeout will not be copied from the encoded session.</p>
<p>This is intended for use for encoded context received via a
broadcast medium (pub/sub, message queues with multiple readers,
etc.). If you know only you received the encoded context,
e.g. you&#x27;re coding a server that receives the context from a HTTP
request, you should join() instead.</p>


  <div class='pre p1 fill-light mt0'>derive(encodedContext: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>encodedContext</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='session'>
      Session
    </h3>
    
  </div>
  

  <p>A session provides a lightweight sequential context that a
microservice can use in the context of any application
framework in order to manage its interactions with other
microservices. It provides simple APIs for service
resolution, distributed tracing, and circuit breakers.</p>
<p>A microservices architecture enables small self contained
units of business logic to be implemented by separate teams
working on isolated services based on the languages and
frameworks best suited for their problem domain.</p>
<p>Any given microservice will contain sequential business logic
implemented in a variety of ways depending on the application
framework chosen. For example it may be a long running
thread, a simple blocking request handler, or a chained
series of reactive handlers in an async environment.</p>
<p>For the most part this business logic can be implemented
exactly as prescribed by the application framework of choice,
however in a microservices architecture, some special care
needs to be taken when this business logic interacts with
other microservices.</p>
<p>Because microservices are updated with much higher frequency
than normal web applications, the interactions between them
form key points that require extra care beyond normal web
interactions in order to avoid creating a system that is both
extremely fragile, unreliable, and opaque.</p>
<p>Realtime service resolution, distributed tracing, and
resilience heuristics such as circuit breakers provide the
foundational behavior required at these interaction
points. These capabilites must be combined with the defensive
coding practice of intelligent fallback behavior when remote
services are unavailable or misbehaving, in order to build a
robust microservice application.</p>
<p>Because of this, a session is expected to be created and made
available to all business logic within a given microservice,
e.g. on a per request basis, as a thread local, part of a
context object, etc depending on the application framework of
choice.</p>


  <div class='pre p1 fill-light mt0'>new Session()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='Session#inject'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>inject()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Grabs the encoded context.</p>


  <div class='pre p1 fill-light mt0'>inject()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#externalize'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>externalize()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns an externalized representation of the distributed session.</p>


  <div class='pre p1 fill-light mt0'>externalize()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#critical'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>critical(category, text)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record a log entry at the CRITICAL logging level.</p>


  <div class='pre p1 fill-light mt0'>critical(category: any, text: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>category</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>text</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#error'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>error(category, text)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record a log entry at the ERROR logging level.</p>


  <div class='pre p1 fill-light mt0'>error(category: any, text: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>category</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>text</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#warn'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>warn(category, text)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record a log entry at the WARN logging level.</p>


  <div class='pre p1 fill-light mt0'>warn(category: any, text: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>category</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>text</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#info'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>info(category, text)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record a log entry at the INFO logging level.</p>


  <div class='pre p1 fill-light mt0'>info(category: any, text: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>category</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>text</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#debug'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>debug(category, text)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record a log entry at the DEBUG logging level.</p>


  <div class='pre p1 fill-light mt0'>debug(category: any, text: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>category</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>text</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#trace'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>trace(level)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>EXPERIMENTAL: Set the logging level for the session.</p>


  <div class='pre p1 fill-light mt0'>trace(level: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>level</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#route'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>route(service, version, target, targetVersion)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>EXPERIMENTAL; requires MDK_EXPERIMENTAL=1 environment variable to
function.</p>
<p>Override service resolution for the current distributed
session. All attempts to resolve <em>service</em>, <em>version</em>
will be replaced with an attempt to resolve <em>target</em>,
<em>targetVersion</em>. This effect will be propogated to any
downstream services involved in the distributed session.</p>


  <div class='pre p1 fill-light mt0'>route(service: any, version: any, target: any, targetVersion: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>service</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>target</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>targetVersion</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#resolve'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>resolve(service, version)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Locate a compatible service instance.</p>
<p>Uses a minimum of 10 seconds and the timeout set on the session.</p>


  <div class='pre p1 fill-light mt0'>resolve(service: any, version: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>service</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#resolve_until'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>resolve_until(service, version, timeout)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Locate a compatible service instance with a non-default timeout.</p>


  <div class='pre p1 fill-light mt0'>resolve_until(service: any, version: any, timeout: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>service</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>timeout</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#resolve_async'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>resolve_async(service, version)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Locate a compatible service instance asynchronously. The result is returned as a promise.</p>


  <div class='pre p1 fill-light mt0'>resolve_async(service: any, version: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>service</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#start_interaction'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>start_interaction()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Start an interaction with a remote service.</p>
<p>The session tracks any nodes resolved during an
interactin with a remote service.</p>
<p>The service resolution API permits a compatible instance
of the service to be located. In addition, it tracks
which exact instances are in use during any
interaction. Should the interaction fail, circuit breaker
state is updated for those nodes, and all involved
instances involved are reported to the tracing services.</p>
<p>This permits realtime reporting of integration issues
when services are updated, and also allows circuit
breakers to mitigate the impact of any such issues.</p>


  <div class='pre p1 fill-light mt0'>start_interaction()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#fail_interaction'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>fail_interaction(message)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Record an interaction as failed.</p>
<p>This will update circuit breaker state for the remote
nodes, as well as reporting all nodes involved to the
tracing system.</p>


  <div class='pre p1 fill-light mt0'>fail_interaction(message: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>message</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#finish_interaction'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>finish_interaction()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Finish an interaction.</p>
<p>This marks an interaction as completed.</p>


  <div class='pre p1 fill-light mt0'>finish_interaction()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#interact'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>interact(callable)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>This is a convenience API that will perform
start_interaction() followed by callable(ssn) followed by
finish_interaction().</p>


  <div class='pre p1 fill-light mt0'>interact(callable: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>callable</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#setDeadline'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setDeadline(seconds)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Set how many seconds the session is expected to live from this point.</p>
<p>If a timeout has previously been set the new timeout will only be
used if it is lower than the existing timeout.</p>
<p>The MDK will not enforce the timeout. Rather, it provides the
information to any process or server in the same session (even if
they are on different machines). By passing this timeout to
blocking APIs you can ensure timeouts are enforced across a whole
distributed session.</p>


  <div class='pre p1 fill-light mt0'>setDeadline(seconds: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>seconds</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#setTimeout'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setTimeout(seconds)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>DEPRECATED, use setDeadline().</p>


  <div class='pre p1 fill-light mt0'>setTimeout(seconds: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>seconds</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='Session#getRemainingTime'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getRemainingTime()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Return how many seconds until the session ought to end.</p>
<p>This will only be accurate across multiple servers insofar as their
clocks are in sync.</p>
<p>If a timeout has not been set the result will be null.</p>


  <div class='pre p1 fill-light mt0'>getRemainingTime()</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='getdiscoveryfactory'>
      getDiscoveryFactory
    </h3>
    
  </div>
  

  <p>Choose DiscoverySource based on environment variables.</p>


  <div class='pre p1 fill-light mt0'>getDiscoveryFactory(env: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>env</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='getfailurepolicy'>
      getFailurePolicy
    </h3>
    
  </div>
  

  <p>Choose FailurePolicy based on environment variables.</p>


  <div class='pre p1 fill-light mt0'>getFailurePolicy(runtime: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>runtime</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='getwsclient'>
      getWSClient
    </h3>
    
  </div>
  

  <p>Get a WSClient, unless env variables suggest the user doesn&#x27;t want one.</p>


  <div class='pre p1 fill-light mt0'>getWSClient(runtime: any)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>runtime</span> <code class='quiet'>(any)</code> 
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='context_header'>
      CONTEXT_HEADER
    </h3>
    
  </div>
  

  <p>This header is used to propogate shared context for distributed traces.</p>


  <div class='pre p1 fill-light mt0'>CONTEXT_HEADER</div>

  

  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
