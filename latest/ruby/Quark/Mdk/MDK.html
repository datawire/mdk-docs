<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Quark::Mdk::MDK - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">DatawireQuarkCore::QuarkObject
  
</div>

    
    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">::DatawireQuarkCore::Static</span>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-__init_fields__">#__init_fields__</a>
    
    <li ><a href="#method-i-derive">#derive</a>
    
    <li ><a href="#method-i-join">#join</a>
    
    <li ><a href="#method-i-register">#register</a>
    
    <li ><a href="#method-i-session">#session</a>
    
    <li ><a href="#method-i-setDefaultDeadline">#setDefaultDeadline</a>
    
    <li ><a href="#method-i-setDefaultTimeout">#setDefaultTimeout</a>
    
    <li ><a href="#method-i-start">#start</a>
    
    <li ><a href="#method-i-stop">#stop</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Quark::Mdk::MDK">
  <h1 id="class-Quark::Mdk::MDK" class="class">
    class Quark::Mdk::MDK
  </h1>

  <section class="description">
    
<p>The <a href="MDK.html">MDK</a> API consists of two interfaces: <a
href="MDK.html">MDK</a> and <a href="Session.html">Session</a>. The <a
href="MDK.html">MDK</a> interface holds globally scoped APIs and state
associated with the microservice. The <a href="Session.html">Session</a>
interface holds locally scoped APIs and state. A <a
href="Session.html">Session</a> must be used sequentially.</p>

<p>The <a href="MDK.html">MDK</a> instance is responsible for communicating
with foundational services like discovery and tracing.</p>

<p>There will typically be one <a href="MDK.html">MDK</a> instance for the
entire process, and one instance of the <a href="Session.html">Session</a>
object per thread/channel/request depending on how the <a
href="MDK.html">MDK</a> is integrated and used within the application
framework of choice.</p>

<p>A note on versions: service versions indicate API compatibility, not
releases of the underlying code. They should be in the form MAJOR.MINOR,
e.g. &#39;2.11&#39;. Major versions indicates incompatibility:
&#39;1.0&#39; is incompatible with &#39;2.11&#39;. Minor versions indicate
backwards compatibility with new features: a client that wants version
&#39;1.1&#39; can talk to version &#39;1.1&#39; and &#39;1.2&#39; but not
to version &#39;1.0&#39;.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>()
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__init_fields__</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-__init_fields__" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">__init_fields__</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="__init_fields__-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">__init_fields__</span>()
    

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-derive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">derive</span><span
            class="method-args">(encodedContext)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="Session.html">Session</a>. The given encoded
distributed session&#39;s properties will be used to configure the new <a
href="Session.html">Session</a>, e.g. overrides will be preserved. However,
because this is a new <a href="Session.html">Session</a> the timeout will
not be copied from the encoded session.</p>

<p>This is intended for use for encoded context received via a broadcast
medium (pub/sub, message queues with multiple readers, etc.). If you know
only you received the encoded context, e.g. you&#39;re coding a server that
receives the context from a HTTP request, you should join() instead.</p>
          
          

          
          <div class="method-source-code" id="derive-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">derive</span>(<span class="ruby-identifier">encodedContext</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.derive` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-join" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join</span><span
            class="method-args">(encodedContext)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="Session.html">Session</a> and join it to an existing
distributed sesion.</p>

<p>This should only ever be done once per an encoded context. That means you
should only use it for RPC or similar one-off calls. If you received the
encoded context via a broadcast medium (pub/sub, message queues with
multiple readers, etc.) you should use childSession() instead.</p>
          
          

          
          <div class="method-source-code" id="join-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">join</span>(<span class="ruby-identifier">encodedContext</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.join` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-register" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">register</span><span
            class="method-args">(service, version, address)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Registers a service endpoint with the discovery system. This can be called
at any point, however registered endpoints will not be advertised to the
discovery system until the <a href="MDK.html">MDK</a> is started.</p>
          
          

          
          <div class="method-source-code" id="register-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">register</span>(<span class="ruby-identifier">service</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">address</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.register` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-session" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">session</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new <a href="Session.html">Session</a>. A <a
href="Session.html">Session</a> created in this way will result in a new
distributed trace. This should therefore be used primarily by edge
services. Intermediary and foundational services should make use of
join(encodedContext) in order to preserve distributed traces.</p>
          
          

          
          <div class="method-source-code" id="session-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">session</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.session` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setDefaultDeadline" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setDefaultDeadline</span><span
            class="method-args">(seconds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Set the default timeout for <a href="MDK.html">MDK</a> sessions.</p>

<p>This is the maximum timeout; if a joined session has a lower timeout that
will be used.</p>
          
          

          
          <div class="method-source-code" id="setDefaultDeadline-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">setDefaultDeadline</span>(<span class="ruby-identifier">seconds</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.setDefaultDeadline` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setDefaultTimeout" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setDefaultTimeout</span><span
            class="method-args">(seconds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>DEPRECATED, use setDefaultDeadline().</p>
          
          

          
          <div class="method-source-code" id="setDefaultTimeout-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">setDefaultTimeout</span>(<span class="ruby-identifier">seconds</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.setDefaultTimeout` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Start the <a href="MDK.html">MDK</a>. An <a href="MDK.html">MDK</a>
instance will not communicate with foundational services unless it is
started.</p>
          
          

          
          <div class="method-source-code" id="start-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.start` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stop" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stop</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Stop the <a href="MDK.html">MDK</a>. When the <a href="MDK.html">MDK</a>
stops unregisters any service endpoints from the discovery system. This
should always be done prior to process exit in order to propogate node
shutdowns in realtime rather than waiting for heartbeats to detect node
departures.</p>
          
          

          
          <div class="method-source-code" id="stop-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`MDK.stop` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

