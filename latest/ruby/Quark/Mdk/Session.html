<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Quark::Mdk::Session - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">DatawireQuarkCore::QuarkObject
  
</div>

    
    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">::DatawireQuarkCore::Static</span>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-__init_fields__">#__init_fields__</a>
    
    <li ><a href="#method-i-critical">#critical</a>
    
    <li ><a href="#method-i-debug">#debug</a>
    
    <li ><a href="#method-i-error">#error</a>
    
    <li ><a href="#method-i-fail_interaction">#fail_interaction</a>
    
    <li ><a href="#method-i-finish_interaction">#finish_interaction</a>
    
    <li ><a href="#method-i-info">#info</a>
    
    <li ><a href="#method-i-inject">#inject</a>
    
    <li ><a href="#method-i-interact">#interact</a>
    
    <li ><a href="#method-i-resolve">#resolve</a>
    
    <li ><a href="#method-i-resolve_async">#resolve_async</a>
    
    <li ><a href="#method-i-resolve_until">#resolve_until</a>
    
    <li ><a href="#method-i-start_interaction">#start_interaction</a>
    
    <li ><a href="#method-i-warn">#warn</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Quark::Mdk::Session">
  <h1 id="class-Quark::Mdk::Session" class="class">
    class Quark::Mdk::Session
  </h1>

  <section class="description">
    
<p>A session provides a lightweight sequential context that a microservice can
use in the context of any application framework in order to manage its
interactions with other microservices. It provides simple APIs for service
resolution, distributed tracing, and circuit breakers.</p>

<p>A microservices architecture enables small self contained units of business
logic to be implemented by separate teams working on isolated services
based on the languages and frameworks best suited for their problem domain.</p>

<p>Any given microservice will contain sequential business logic implemented
in a variety of ways depending on the application framework chosen. For
example it may be a long running thread, a simple blocking request handler,
or a chained series of reactive handlers in an async environment.</p>

<p>For the most part this business logic can be implemented exactly as
prescribed by the application framework of choice, however in a
microservices architecture, some special care needs to be taken when this
business logic interacts with other microservices.</p>

<p>Because microservices are updated with much higher frequency than normal
web applications, the interactions between them form key points that
require extra care beyond normal web interactions in order to avoid
creating a system that is both extremely fragile, unreliable, and opaque.</p>

<p>Realtime service resolution, distributed tracing, and resilience heuristics
such as circuit breakers provide the foundational behavior required at
these interaction points. These capabilites must be combined with the
defensive coding practice of intelligent fallback behavior when remote
services are unavailable or misbehaving, in order to build a robust
microservice application.</p>

<p>Because of this, a session is expected to be created and made available to
all business logic within a given microservice, e.g. on a per request
basis, as a thread local, part of a context object, etc depending on the
application framework of choice.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>()
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">__init_fields__</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-__init_fields__" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">__init_fields__</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="__init_fields__-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">__init_fields__</span>()
    

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-critical" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">critical</span><span
            class="method-args">(category, text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record a log entry at the CRITICAL logging level.</p>
          
          

          
          <div class="method-source-code" id="critical-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">critical</span>(<span class="ruby-identifier">category</span>, <span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.critical` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-debug" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">debug</span><span
            class="method-args">(category, text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record a log entry at the DEBUG logging level.</p>
          
          

          
          <div class="method-source-code" id="debug-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 268</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">debug</span>(<span class="ruby-identifier">category</span>, <span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.debug` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-error" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">error</span><span
            class="method-args">(category, text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record a log entry at the ERROR logging level.</p>
          
          

          
          <div class="method-source-code" id="error-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 241</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">category</span>, <span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.error` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fail_interaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fail_interaction</span><span
            class="method-args">(message)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record an interaction as failed.</p>

<p>This will update circuit breaker state for the remote nodes, as well as
reporting all nodes involved to the tracing system.</p>
          
          

          
          <div class="method-source-code" id="fail_interaction-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fail_interaction</span>(<span class="ruby-identifier">message</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.fail_interaction` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-finish_interaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">finish_interaction</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finish an interaction.</p>

<p>This marks an interaction as completed.</p>
          
          

          
          <div class="method-source-code" id="finish_interaction-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">finish_interaction</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.finish_interaction` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">info</span><span
            class="method-args">(category, text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record a log entry at the INFO logging level.</p>
          
          

          
          <div class="method-source-code" id="info-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">info</span>(<span class="ruby-identifier">category</span>, <span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.info` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inject" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inject</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Grabs the encoded context.</p>
          
          

          
          <div class="method-source-code" id="inject-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inject</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.inject` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-interact" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">interact</span><span
            class="method-args">(callable)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is a convenience API that will perform <a
href="Session.html#method-i-start_interaction">#start_interaction</a>()
followed by callable(ssn) followed by <a
href="Session.html#method-i-finish_interaction">#finish_interaction</a>().</p>
          
          

          
          <div class="method-source-code" id="interact-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 361</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">interact</span>(<span class="ruby-identifier">callable</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.interact` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resolve" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve</span><span
            class="method-args">(service, version)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Locate a compatible service instance.</p>
          
          

          
          <div class="method-source-code" id="resolve-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">service</span>, <span class="ruby-identifier">version</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.resolve` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resolve_async" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve_async</span><span
            class="method-args">(service, version)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Locate a compatible service instance asynchronously. The result is returned
as a promise.</p>
          
          

          
          <div class="method-source-code" id="resolve_async-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve_async</span>(<span class="ruby-identifier">service</span>, <span class="ruby-identifier">version</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.resolve_async` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resolve_until" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve_until</span><span
            class="method-args">(service, version, timeout)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Locate a compatible service instance with a non-default timeout.</p>
          
          

          
          <div class="method-source-code" id="resolve_until-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 288</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve_until</span>(<span class="ruby-identifier">service</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">timeout</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.resolve_until` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-start_interaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start_interaction</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Start an interaction with a remote service.</p>

<p>The session tracks any nodes resolved during an interactin with a remote
service.</p>

<p>The service resolution API permits a compatible instance of the service to
be located. In addition, it tracks which exact instances are in use during
any interaction. Should the interaction fail, circuit breaker state is
updated for those nodes, and all involved instances involved are reported
to the tracing services.</p>

<p>This permits realtime reporting of integration issues when services are
updated, and also allows circuit breakers to mitigate the impact of any
such issues.</p>
          
          

          
          <div class="method-source-code" id="start_interaction-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 322</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start_interaction</span>()
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.start_interaction` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-warn" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">warn</span><span
            class="method-args">(category, text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Record a log entry at the WARN logging level.</p>
          
          

          
          <div class="method-source-code" id="warn-source">
            <pre><span class="ruby-comment"># File output/rb/mdk-2.0/lib/mdk.rb, line 250</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">category</span>, <span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&#39;`Session.warn` is an abstract method&#39;</span>

    <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

